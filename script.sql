create user GruppoBLU identified by gruppoBLU;
grant dba, unlimited tablespace to GruppoBLU;

 CREATE TABLE "GRUPPOBLU"."FUNZIONALITA" 
   (	"SIGLAFUNZIONE" VARCHAR2(10 BYTE), 
	"NOMEFUNZIONE" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	 PRIMARY KEY ("SIGLAFUNZIONE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
  
  CREATE TABLE "GRUPPOBLU"."GRUPPO" 
   (	"ID_G" CHAR(1 BYTE), 
	"NOMEGRUPPO" VARCHAR2(15 BYTE) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID_G")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

  CREATE TABLE "GRUPPOBLU"."ACCOUNT_UTENTE" 
   (	"NOME" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"COGNOME" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"USERNAME" VARCHAR2(55 BYTE), 
	"PASSWORD_ACCOUNT" VARCHAR2(25 BYTE) NOT NULL ENABLE, 
	"SIGLAREDAZIONE" VARCHAR2(10 BYTE), 
	"SIGLAGIORNALISTA" VARCHAR2(20 BYTE), 
	"STATO" CHAR(1 BYTE), 
	 PRIMARY KEY ("USERNAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

CREATE TABLE "GRUPPOBLU"."NOTIZIA" 
   (	"ID_N" NUMBER(*,0), 
	"LOCK_N" CHAR(1 BYTE) NOT NULL ENABLE, 
  "STATO" CHAR(1 BYTE) NOT NULL ENABLE, 
	"TITOLO" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"SOTTOTIOLO" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"AUTORE" VARCHAR2(55 BYTE) NOT NULL ENABLE, 
	"ULTIMODIGITATORE" VARCHAR2(55 BYTE) NOT NULL ENABLE, 
	"DATACREAZIONE" TIMESTAMP (6) NOT NULL ENABLE, 
	"DATATRASMISSIONE" TIMESTAMP (6), 
	"TESTO" VARCHAR2(4000 BYTE) NOT NULL ENABLE, 
	"LUNGHEZZATESTO" NUMBER(*,0), 
	 PRIMARY KEY ("ID_N")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
  
  CREATE TABLE "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" 
   (	"ID_ACCOUNT" VARCHAR2(55 BYTE), 
	"ID_GRUPPO" CHAR(1 BYTE), 
	 PRIMARY KEY ("ID_ACCOUNT", "ID_GRUPPO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE, 
	 FOREIGN KEY ("ID_GRUPPO")
	  REFERENCES "GRUPPOBLU"."GRUPPO" ("ID_G") ENABLE, 
	 FOREIGN KEY ("ID_ACCOUNT")
	  REFERENCES "GRUPPOBLU"."ACCOUNT_UTENTE" ("USERNAME") ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

  CREATE TABLE "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" 
   (	"ID_G" CHAR(1 BYTE), 
	"ID_F" VARCHAR2(10 BYTE), 
	 PRIMARY KEY ("ID_G", "ID_F")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE, 
	 FOREIGN KEY ("ID_G")
	  REFERENCES "GRUPPOBLU"."GRUPPO" ("ID_G") ENABLE, 
	 FOREIGN KEY ("ID_F")
	  REFERENCES "GRUPPOBLU"."FUNZIONALITA" ("SIGLAFUNZIONE") ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
  
CREATE SEQUENCE  "GRUPPOBLU"."SEQUENCE1"  
MINVALUE 1 MAXVALUE 99999999999 
INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE;

create or replace trigger "GRUPPOBLU"."INS_ID_NOTIZIA"
before insert on "GRUPPOBLU"."NOTIZIA"
for each row
begin 
  select SEQUENCE1.nextval
  into :new.id_n from dual;
end;
/
create or replace trigger "GRUPPOBLU"."IMPO_MOD_IDFUNZIONALITA"
before update of siglafunzione on "GRUPPOBLU"."FUNZIONALITA" 
for each row
begin
 raise_application_error(-20500,'Impossibile modificare la chiave di funzionalità');
end;
/
create or replace trigger "GRUPPOBLU"."IMPO_MOD_IDGRUPPO"
before update of id_g on "GRUPPOBLU"."GRUPPO" 
for each row
begin
 raise_application_error(-20500,'Impossibile modificare il campo id di gruppo');
end;
/
create or replace trigger "GRUPPOBLU"."IMPO_MOD_USERNAME"
before update of username on "GRUPPOBLU"."ACCOUNT_UTENTE" 
for each row
begin
 raise_application_error(-20500,'Impossibile modificare username utente');
end;
/
Insert into "GRUPPOBLU"."ACCOUNT_UTENTE" (NOME,COGNOME,USERNAME,PASSWORD_ACCOUNT,SIGLAREDAZIONE,SIGLAGIORNALISTA,STATO) values ('annamaria','spera','annamaria.spera@hotmail.it','annamaria','red1','red1_ansp','A');
Insert into "GRUPPOBLU"."ACCOUNT_UTENTE" (NOME,COGNOME,USERNAME,PASSWORD_ACCOUNT,SIGLAREDAZIONE,SIGLAGIORNALISTA,STATO) values ('antonio','laurano','antonio.laurano@gmail.com','antonio','red3','red3_anla','A');
Insert into "GRUPPOBLU"."ACCOUNT_UTENTE" (NOME,COGNOME,USERNAME,PASSWORD_ACCOUNT,SIGLAREDAZIONE,SIGLAGIORNALISTA,STATO) values ('francesca','di miceli','francesca.dimiceli@gmail.com','francesca','red2','red2_frdi','A');
Insert into "GRUPPOBLU"."ACCOUNT_UTENTE" (NOME,COGNOME,USERNAME,PASSWORD_ACCOUNT,SIGLAREDAZIONE,SIGLAGIORNALISTA,STATO) values ('francesco','giancipoli','francesco.giancipoli@hotmail.it','francesco','red4','red4_frgi','A');
Insert into "GRUPPOBLU"."ACCOUNT_UTENTE" (NOME,COGNOME,USERNAME,PASSWORD_ACCOUNT,SIGLAREDAZIONE,SIGLAGIORNALISTA,STATO) values ('eugenio','stromei','eugenio.stromei@hotmail.it','eugenio','red5','red4_eust','A');

Insert into "GRUPPOBLU"."GRUPPO" (ID_G,NOMEGRUPPO) values ('a','amministratore');
Insert into "GRUPPOBLU"."GRUPPO" (ID_G,NOMEGRUPPO) values ('g','giornalista');

Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f1','creaAccount');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f2','cancellaAccount');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f3','modificaAccount');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f4','listaAccount');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f5','creazioneNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f6','modificaNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f7','registraNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f8','cancellazioneNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f9','trasmettiNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f10','visualizzaNotizia');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f11','listaNotizie');
Insert into "GRUPPOBLU"."FUNZIONALITA" (SIGLAFUNZIONE,NOMEFUNZIONE) values ('f12','annulla');

Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('a','f1');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('a','f2');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('a','f3');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('a','f4');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f10');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f11');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f12');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f5');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f6');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f7');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f8');
Insert into "GRUPPOBLU"."ASS_GRUPPO_FUNZIO" (ID_G,ID_F) values ('g','f9');

Insert into "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" (ID_ACCOUNT,ID_GRUPPO) values ('annamaria.spera@hotmail.it','a');
Insert into "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" (ID_ACCOUNT,ID_GRUPPO) values ('antonio.laurano@gmail.com','a');
Insert into "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" (ID_ACCOUNT,ID_GRUPPO) values ('francesca.dimiceli@gmail.com','a');
Insert into "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" (ID_ACCOUNT,ID_GRUPPO) values ('francesco.giancipoli@hotmail.it','a');
Insert into "GRUPPOBLU"."ASS_ACCOUNT_GRUPPO" (ID_ACCOUNT,ID_GRUPPO) values ('eugenio.stromei@hotmail.it','a');
